<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile</title>
    <link rel="stylesheet" href="userStyles.css">
</head>
<body>
    <header>
    <h1 id="username-header">My Profile</h1>

    <!-- Navigation Links --> 
        <nav>
            <a href ="HTMLPage1.html" class="nav-button">Home Page</a>
            <a href="events.html" class="nav-button">Events Only</a>
            <a href="map.html" class="nav-button">Map Only</a>
            <a href="index.html" class="log-butt">LogOut</a>
        </nav>
    </header>

    <!-- Profile Picture -->
    <section>
        <h2>Profile Picture</h2>
        <img src= "profilepicture.jpg" alt="Profile Picture" id="profilePicture">
    </section>

    <!-- User's Organizational Title -->
    <section>
        <h2>Organizational Title</h2>
        <p id="userTitle">President of Club</p>
    </section>

    <!-- User's Events -->
    <section>
        <h2>Events Created</h2>
        <div id="userEvents">
            <!-- User's events will be listed here -->
        </div>
        <button id="eventBtn">Manage Events</button>
    </section>

    <!-- Followers and Following -->
    <section>
        <h2>Followers and Following</h2>
        <button id="followersBtn">View Followers and Following</button>
    </section>

    <!-- Followers Modal -->
    <div id="followersModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeFollowers">&times;</span>
            <h2>Followers</h2>
            <div id="followersList">
                <p>Matthew</p>
                <p>Beca</p>
                <p>Jake</p>
                <p>Zac</p>
            </div>
            <h2>Following</h2>
            <div id="followingList">
                <p>Matthew</p>
                <p>Beca</p>
                <p>Jake</p>
                <p>Zac</p>
            </div>
        </div>
    </div>

    <!-- Events Modal -->
    <div id="eventsModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeEvents">&times;</span>
            <h2>Events Created</h2>
            <div id="eventList">
                <p>MIS Pizza Party</p>
                <p>Choir Concert</p>
                <p>Art Walk</p>
                <p>Intermural Volleyball Game</p>
                <p>Dance Contest</p>
                <p>MIS Party</p>
            </div>
        </div>
    </div>

    <script>
        // Get followers modal elements
        const followersModal = document.getElementById("followersModal");
        const followersBtn = document.getElementById("followersBtn");
        const closeFollowers = document.getElementById("closeFollowers");

        followersBtn.onclick = () => {
            followersModal.style.display = "block";
        };

        closeFollowers.onclick = () => {
            followersModal.style.display = "none";
        };

        // Get events modal elements
        const eventsModal = document.getElementById("eventsModal");
        const eventBtn = document.getElementById("eventBtn");
        const closeEvents = document.getElementById("closeEvents");

        eventBtn.onclick = () => {
            eventsModal.style.display = "block";
        };

        closeEvents.onclick = () => {
            eventsModal.style.display = "none";
        };

        // Close modals on outside click
        window.onclick = (event) => {
            if (event.target === followersModal) {
                followersModal.style.display = "none";
            } else if (event.target === eventsModal) {
                eventsModal.style.display = "none";
            }
        };

        // Follow button functionality
        var followBtn = document.getElementById("followBtn");
        followBtn.onclick = function() {
            var profileEmail = "profile@example.com"; // Replace with the actual profile email
            var userEmail = "user@example.com"; // Replace with the logged-in user's email

            fetch('/follow', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ profileEmail: profileEmail, userEmail: userEmail })
            }).then(response => response.json()).then(data => {
                if (data.success) {
                    alert('You are now following this user.');
                } else {
                    alert('Failed to follow the user.');
                }
            });
        }

        // Hide follow button if viewing own profile
        var isOwnProfile = false; // Replace with actual logic to determine if viewing own profile
        if (isOwnProfile) {
            document.getElementById("followSection").style.display = "none";
        }
    </script>
</body>
</html>
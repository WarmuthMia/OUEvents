<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile</title>
    <link rel="stylesheet" href="userStyles.css">
</head>
<body>
    <header>
    <h1 id="username-header">My Profile</h1>
    <div class="search-container">
        <input type="text" id="search-bar" placeholder="Search Users...">
        <button id="search-button">Search</button>
    </div>

    <!-- Navigation Links -->
    <section> 
        <nav>
            <a href ="HTMLPage1.html" class="nav-button">Home Page</a>
            <a href="events.html" class="nav-button">Events Only</a>
            <a href="map.html" class="nav-button">Map Only</a>
            <a href="index.html" class="log-butt">LogOut</a>
        </nav>
    </section>
    </header>

    <!-- Profile Picture -->
    <section>
        <h2>Profile Picture</h2>
        <img src="path/to/profile_picture.jpg" alt="Profile Picture" id="profilePicture">
    </section>

    <!-- User's Organizational Title -->
    <section>
        <h2>Organizational Title</h2>
        <p id="userTitle">President of Club</p>
    </section>

    <!-- User's Events -->
    <section>
        <h2>Events Created</h2>
        <div id="userEvents">
            <!-- User's events will be listed here -->
        </div>
        <button onclick="window.location.href='/manage_events'">Manage Events</button>
    </section>

    <!-- Followers and Following -->
    <section>
        <h2>Followers and Following</h2>
        <button id="followersBtn">View Followers and Following</button>
    </section>

    <!-- Follow Button -->
    <section id="followSection">
        <button id="followBtn">Follow</button>
    </section>

    <!-- Modal for Followers and Following -->
    <div id="followersModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Followers</h2>
            <div id="followersList">
                <!-- List of followers -->
                 <p>Matthew</p>
                 <p>Beca</p>
                 <p>Jake</p>
                 <p>Zac</p>
            </div>
            <h2>Following</h2>
            <div id="followingList">
                <!-- List of following -->
                <p>Matthew</p>
                 <p>Beca</p>
                 <p>Jake</p>
                 <p>Zac</p>
            </div>
        </div>
    </div>

    <script>
        // Get the modal
        var modal = document.getElementById("followersModal");

        // Get the button that opens the modal
        var btn = document.getElementById("followersBtn");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks the button, open the modal
        btn.onclick = function() {
            modal.style.display = "block";
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // Follow button functionality
        var followBtn = document.getElementById("followBtn");
        followBtn.onclick = function() {
            var profileEmail = "profile@example.com"; // Replace with the actual profile email
            var userEmail = "user@example.com"; // Replace with the logged-in user's email

            fetch('/follow', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ profileEmail: profileEmail, userEmail: userEmail })
            }).then(response => response.json()).then(data => {
                if (data.success) {
                    alert('You are now following this user.');
                } else {
                    alert('Failed to follow the user.');
                }
            });
        }

        // Hide follow button if viewing own profile
        var isOwnProfile = false; // Replace with actual logic to determine if viewing own profile
        if (isOwnProfile) {
            document.getElementById("followSection").style.display = "none";
        }
    </script>
</body>
</html>